function init(){MAP_TYPE_NAME="user#customMap",TILES_PATH="img/map/tile",MAX_ZOOM=4,PIC_WIDTH=1200,PIC_HEIGHT=668;ymaps.layer.storage.add("user#layer",(function(){var t=new ymaps.Layer(TILES_PATH+"/%z/tile-%x-%y.jpg",{});return t.getZoomRange=function(){return ymaps.vow.resolve([0,4])},t.getCopyrights=function(){return ymaps.vow.resolve("©")},t}));var t=new ymaps.MapType(MAP_TYPE_NAME,["user#layer"]);ymaps.mapType.storage.add(MAP_TYPE_NAME,t);var e=256*Math.pow(2,MAX_ZOOM),a=new ymaps.Map("map",{center:[0,0],zoom:0,controls:[],type:MAP_TYPE_NAME},{projection:new ymaps.projection.Cartesian([[PIC_HEIGHT/2-e,-PIC_WIDTH/2],[PIC_HEIGHT/2,e-PIC_WIDTH/2]],[!1,!1]),restrictMapArea:[[-PIC_HEIGHT/2,-PIC_WIDTH/2],[PIC_HEIGHT/2,PIC_WIDTH/2]]}),n=new ymaps.ObjectManager({});a.geoObjects.add(n);var s=["Развлечения","Культура","Школы","Детские сады","Здоровье"].map((function(t){return new ymaps.control.ListBoxItem({data:{content:t},state:{selected:!1}})})),r=new ymaps.control.ListBox({data:{content:"Фильтр",title:"Фильтр"},items:s,state:{expanded:!0,filters:s.reduce((function(t,e){return t[e.data.get("content")]=e.isSelected(),t}),{})}});a.controls.add(r),a.behaviors.disable("drag"),r.events.add(["select","deselect"],(function(t){var e=t.get("target"),a=ymaps.util.extend({},r.state.get("filters"));a[e.data.get("content")]=e.isSelected(),r.state.set("filters",a)})),s.forEach((t,e)=>$(".location-list").append('<li class="location-list__item"id="ya-map-'+e+'">'+t.data._data.content+"</li>")),document.querySelectorAll(".location-list__item").forEach(t=>t.addEventListener("click",t=>o(t)));let i=!1;const o=t=>{let e=$(".location-list").children()[0];e==$(t.target)[0]?($(".location-list").children().removeClass("active"),$(t.target).addClass("active")):(e.classList.remove("active"),$(t.target).toggleClass("active"));let a=ymaps.util.extend({},r.state.get("filters")),n=t.target.innerText.substr(0,1).toUpperCase()+t.target.innerText.substr(1).toLowerCase();if("Все объекты"==n){let t=Object.assign({},a);for(item of(t[Symbol.iterator]=function*(){var t;for(t in this)yield[t,this[t]]},i=!i,t))a[item[0]]=i}else a[n]=!a[n];l(r.state.set("filters",a))};function l(t){return function(e){var a=e.properties.balloonContent;return 19==e.id||t[a]}}new ymaps.Monitor(r.state).add("filters",(function(t){n.setFilter(l(t))})),$.ajax({url:"https://api.jsonbin.io/b/5fce251c516f9d1270293446/3"}).done((function(t){n.add(t)}))}ymaps.ready(init);