function testWebP(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let mySwiper=new Swiper(".gallery-slider",{loop:!0,navigation:{nextEl:".gallery-nav__arrow-next",prevEl:".gallery-nav__arrow-prev"}});$(document).ready((function(){$("main").hasClass("main")||$(".header,.header-burger").addClass("black"),$(".header-burger").click((function(){$(".header-burger").hasClass("active")&&$(".popup").hasClass("active")?$(".popup,.header,.header-burger").toggleClass("active"):$(".header-burger,.header-menu,.main-text").toggleClass("active"),$("body").toggleClass("lock")})),$("#call-action-header,#call-action-footer,.main-text__link").click((function(){$("body").toggleClass("lock"),$(".header,.popup,.header-burger,.header-action__link").toggleClass("active");let e=$(".header-action__link");$(".header").hasClass("active")?e.html("Закрыть"):e.html("Обратный звонок")})),$(".settings-fieldset__label").children("input").click((function(){$(this).parent().toggleClass("active"),$(this).parent().hasClass("active")?$(this).prop("checked",!0):$(this).prop("checked",!1)})),$("#flat-reset").click((function(){$(".settings-form fieldset label.active").toggleClass("active"),$(this).toggleClass("disabled"),$(".settings-form fieldset input:checked").prop("checked",!1)}));const e=e=>e.value=e.value.replace(/\D/g,""),t=({target:t})=>{t.value=e(t);let a=Array.from(document.querySelectorAll(".settings-fieldset input")),l=new Set(a.map(e=>{if(e.checked||"text"===e.getAttribute("type")&&e.value)return e}));l.forEach(e=>e?null:l.delete(e)),(e=>{let t=$(".settings-form__reset");e&&t.hasClass("disabled")?t.removeClass("disabled"):e||t.addClass("disabled")})(l.size>0)};document.querySelectorAll(".tbody .flat-table__element").forEach(e=>e.addEventListener("click",e=>(({target:e})=>{let t=$('<div class="flat-table__element_popup" id="flat-table-popup"><h2 class="flat-popup__title">Квартиры № 107</h2><div class="flat-popup__wrapper"><img class="flat-popup__image" src="img/flat-info.jpg" alt="" /><div class="flat-popup__icon"></div></div><div class="flat-popup__wrapper"><h2 class="flat-popup__title">Квартиры № 107</h2><div class="flat-popup__inner flat-inner"><div class="flat-inner__block"><span>9</span><p>Этаж</p></div><div class="flat-inner__block"><span>34.79</span><p>Площадь</p></div><div class="flat-inner__block"><span>1</span><p>Комната</p></div><div class="flat-inner__block"><span>4</span><p>Окна</p></div></div><p class="flat-popup__description">Magnum Opus — «великое дело», главный труд жизни. Самое значимое творение человека в искусстве, науке или любой другой сфере деятельности.</p><div class="flat-popup__inner flat-inner"><a class="flat-inner__link">Оставить заявку</a><a class="flat-inner__link active">Скачать PDF</a></div></div></div>')[0],a=e.closest(".flat-table__element");a.classList.toggle("active"),a.classList.contains("active")&&!$(a).parent()[0].classList.contains("thead")?a.after(t):a.nextSibling.remove()})(e))),document.querySelectorAll(".flat-table .thead").forEach(e=>e.addEventListener("click",e=>(({target:e})=>{e.classList.toggle("active"),$(".flat-table__element_popup").remove(),$(".flat-table__element").removeClass("active");const t=e.dataset.order=-(e.dataset.order||-1);let a=Array.from($(".flat-table .thead .flat-table__element div")),l=0;a.forEach((t,a)=>{t==e&&(l=a)});const s=new Intl.Collator(["en","ru"],{numeric:!0}),i=(e,t)=>(a,l)=>t*s.compare(a.children[e].innerHTML,l.children[e].innerHTML);let n=e.closest("#testedTable").children[1];for(const e of Array.from(n.children))n.append(...[...n.children].sort(i(l,t)))})(e))),document.querySelectorAll(".settings-fieldset input").forEach(e=>{e.addEventListener("click",e=>t(e)),e.addEventListener("keyup",e=>t(e))}),document.querySelectorAll(".popup-form__input,.proposal-form__input").forEach(t=>t.addEventListener("keyup",t=>e(t.target))),$('input[type="tel"]').inputmask("+7 (999) 999-9999")}));