function init(){MAP_TYPE_NAME="user#customMap",TILES_PATH="img/map/tile",MAX_ZOOM=4,PIC_WIDTH=1200,PIC_HEIGHT=668;ymaps.layer.storage.add("user#layer",(function(){var e=new ymaps.Layer(TILES_PATH+"/%z/tile-%x-%y.jpg",{});return e.getZoomRange=function(){return ymaps.vow.resolve([0,4])},e.getCopyrights=function(){return ymaps.vow.resolve("©")},e}));var e=new ymaps.MapType(MAP_TYPE_NAME,["user#layer"]);ymaps.mapType.storage.add(MAP_TYPE_NAME,e);var t=256*Math.pow(2,MAX_ZOOM),a=new ymaps.Map("map",{center:[0,0],zoom:0,controls:[],type:MAP_TYPE_NAME},{projection:new ymaps.projection.Cartesian([[PIC_HEIGHT/2-t,-PIC_WIDTH/2],[PIC_HEIGHT/2,t-PIC_WIDTH/2]],[!1,!1]),restrictMapArea:[[-PIC_HEIGHT/2,-PIC_WIDTH/2],[PIC_HEIGHT/2,PIC_WIDTH/2]]}),n=new ymaps.ObjectManager({});a.geoObjects.add(n);var o=["Развлечения","Культура","Школы","Детские сады","Здоровье"].map((function(e){return new ymaps.control.ListBoxItem({data:{content:e},state:{selected:!1}})})),s=new ymaps.control.ListBox({data:{content:"Фильтр",title:"Фильтр"},items:o,state:{expanded:!0,filters:o.reduce((function(e,t){return e[t.data.get("content")]=t.isSelected(),e}),{})}});a.controls.add(s),a.behaviors.disable("drag"),s.events.add(["select","deselect"],(function(e){var t=e.get("target"),a=ymaps.util.extend({},s.state.get("filters"));a[t.data.get("content")]=t.isSelected(),s.state.set("filters",a)})),o.forEach((e,t)=>$(".location-list").append('<li class="location-list__item"id="ya-map-'+t+'">'+e.data._data.content+"</li>")),document.querySelectorAll(".location-list__item").forEach(e=>e.addEventListener("click",e=>r(e)));let i=!1;const r=e=>{let t=$(".location-list").children()[0];t==$(e.target)[0]?($(".location-list").children().removeClass("active"),$(e.target).addClass("active")):(t.classList.remove("active"),$(e.target).toggleClass("active"));let a=ymaps.util.extend({},s.state.get("filters")),n=e.target.innerText.substr(0,1).toUpperCase()+e.target.innerText.substr(1).toLowerCase();if("Все объекты"==n){let e=Object.assign({},a);for(item of(e[Symbol.iterator]=function*(){var e;for(e in this)yield[e,this[e]]},i=!i,e))a[item[0]]=i}else a[n]=!a[n];l(s.state.set("filters",a))};function l(e){return function(t){var a=t.properties.balloonContent;return e[a]}}new ymaps.Monitor(s.state).add("filters",(function(e){n.setFilter(l(e))}));var c=new ymaps.Placemark([0,-50],{hintContent:"Наш офис",balloonContentHeader:'<b class="my-company-baloon__header">IQ квартал</b>',balloonContentBody:'<span class="my-company-baloon__body">Ленина, 35</span>'},{iconLayout:"default#image",iconImageHref:"img/map/index.svg",iconImageSize:[50,50],balloonOffset:[80,-30],balloonCloseButton:!1,hideIconOnBalloonOpen:!1,balloonMinWidth:300,balloonMinHeight:50,balloonShadowOffset:[0,2.43346,2.43346]});a.geoObjects.add(c),a.geoObjects.options.set("balloonPanelMaxMapArea",0),c.balloon.open(),$.ajax({url:"https://api.jsonbin.io/b/5fce251c516f9d1270293446/4"}).done((function(e){n.add(e)}))}ymaps.ready(init);